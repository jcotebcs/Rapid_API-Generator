<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="RapidAPI Generator - Convert any API URL into production-ready TypeScript code instantly" />
  <meta name="keywords" content="API client, TypeScript, code generator, React, Vite, OpenAPI, Swagger" />
  <meta name="author" content="jcotebcs" />
  <title>RapidAPI Generator</title>

  <!-- PWA Manifest -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#0055A4">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="RapidAPI Gen">
  
  <!-- Favicon and Icons -->
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Crect width='64' height='64' rx='12' fill='%230055A4'/%3E%3Cpath d='M16 20h32v4H16zm0 8h24v4H16zm0 8h28v4H16zm0 8h20v4H16z' fill='%2300C853'/%3E%3C/svg%3E">
  <link rel="apple-touch-icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 192 192'%3E%3Crect width='192' height='192' rx='36' fill='%230055A4'/%3E%3Cpath d='M48 60h96v12H48zm0 24h72v12H48zm0 24h84v12H48zm0 24h60v12H48z' fill='%2300C853'/%3E%3C/svg%3E">

  <!-- Inline CSS for self-contained functionality -->
  <style>
    :root {
      --blue-collar-blue: #0055A4;
      --blue-collar-green: #00C853;
      --blue-collar-black: #1A1A1A;
      --blue-collar-white: #F5F5F5;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, var(--blue-collar-blue), var(--blue-collar-black), var(--blue-collar-green));
      min-height: 100vh;
      color: var(--blue-collar-white);
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 1rem;
      min-height: 100vh;
    }
    
    .glass {
      background: rgba(245, 245, 245, 0.1);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(245, 245, 245, 0.2);
      border-radius: 1rem;
      padding: 1.5rem;
      margin-bottom: 2rem;
    }
    
    .header {
      text-align: center;
      margin-bottom: 2rem;
    }
    
    .title {
      font-size: 3rem;
      font-weight: bold;
      background: linear-gradient(45deg, var(--blue-collar-blue), var(--blue-collar-green));
      background-clip: text;
      -webkit-background-clip: text;
      color: transparent;
      margin-bottom: 0.5rem;
    }
    
    .subtitle {
      font-size: 1.25rem;
      opacity: 0.9;
    }
    
    .form-group {
      margin-bottom: 1rem;
    }
    
    .label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 500;
    }
    
    .input-group {
      display: flex;
      gap: 0.75rem;
      align-items: center;
    }
    
    .input, select {
      flex: 1;
      padding: 0.75rem;
      background: rgba(26, 26, 26, 0.3);
      border: 1px solid rgba(245, 245, 245, 0.2);
      border-radius: 0.75rem;
      color: var(--blue-collar-white);
      font-size: 1rem;
    }
    
    .input:focus, select:focus {
      outline: none;
      border-color: var(--blue-collar-green);
    }
    
    .input::placeholder {
      color: rgba(245, 245, 245, 0.5);
    }

    .parameter-row {
      display: grid;
      grid-template-columns: 1fr 1fr auto;
      gap: 0.5rem;
      margin-bottom: 0.5rem;
      align-items: center;
    }

    .parameter-input {
      padding: 0.5rem;
      border: 1px solid rgba(245, 245, 245, 0.2);
      border-radius: 0.5rem;
      background: rgba(26, 26, 26, 0.3);
      color: var(--blue-collar-white);
      font-size: 0.875rem;
    }

    .remove-param-btn {
      padding: 0.5rem;
      border: none;
      border-radius: 0.5rem;
      background: rgba(220, 53, 69, 0.3);
      color: var(--blue-collar-white);
      cursor: pointer;
      font-size: 0.875rem;
    }

    .remove-param-btn:hover {
      background: rgba(220, 53, 69, 0.5);
    }
    
    .btn {
      padding: 0.75rem 2rem;
      border: none;
      border-radius: 0.75rem;
      font-size: 1rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    
    .btn-primary {
      background: var(--blue-collar-green);
      color: var(--blue-collar-white);
    }
    
    .btn-primary:hover:not(:disabled) {
      background: #00a843;
    }
    
    .btn-secondary {
      background: var(--blue-collar-blue);
      color: var(--blue-collar-white);
    }
    
    .btn-secondary:hover:not(:disabled) {
      background: #004a93;
    }
    
    .output-section {
      display: none;
    }
    
    .output-section.show {
      display: block;
    }
    
    .output-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1.5rem;
    }
    
    .output-title {
      font-size: 1.5rem;
      font-weight: bold;
    }
    
    .button-group {
      display: flex;
      gap: 0.75rem;
    }
    
    .tabs {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-bottom: 1rem;
      border-bottom: 1px solid rgba(245, 245, 245, 0.2);
      padding-bottom: 1rem;
    }
    
    .tab {
      padding: 0.5rem 1rem;
      border: none;
      border-radius: 0.5rem;
      background: rgba(26, 26, 26, 0.3);
      color: rgba(245, 245, 245, 0.7);
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .tab.active {
      background: var(--blue-collar-green);
      color: var(--blue-collar-white);
    }
    
    .tab:hover:not(.active) {
      background: rgba(26, 26, 26, 0.5);
    }
    
    .code-display {
      background: rgba(26, 26, 26, 0.5);
      border: 1px solid rgba(245, 245, 245, 0.1);
      border-radius: 0.75rem;
      padding: 1rem;
      overflow-x: auto;
    }
    
    .code-display pre {
      margin: 0;
      font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
      font-size: 0.875rem;
      line-height: 1.5;
      white-space: pre-wrap;
    }
    
    .hidden {
      display: none;
    }
    
    .loading {
      opacity: 0.6;
    }
  </style>


</head>
<body>
  <div class="container">
    <header class="header">
      <h1 class="title">RapidAPI Generator</h1>
      <p class="subtitle">Convert any API URL into production-ready TypeScript code instantly</p>
    </header>

    <!-- Input Section -->
    <div class="glass">
      <!-- API Key Management -->
      <div class="form-group">
        <label class="label">üîë RapidAPI Key</label>
        <div class="input-group">
          <input
            type="password"
            id="rapidApiKey"
            class="input"
            placeholder="Enter your RapidAPI key..."
            title="Your RapidAPI key (stored securely in browser)"
          />
          <button id="saveKeyBtn" class="btn btn-secondary" title="Save key for session">
            Save Key
          </button>
        </div>
        <small style="color: rgba(245, 245, 245, 0.7); font-size: 0.875rem;">
          üõ°Ô∏è Key is stored locally in your browser and never sent to servers
        </small>
      </div>

      <!-- API URL Input -->
      <div class="form-group">
        <label class="label">üåê RapidAPI URL</label>
        <div class="input-group">
          <input
            type="url"
            id="apiUrl"
            class="input"
            value="https://weatherapi-com.p.rapidapi.com/current.json"
            placeholder="Enter RapidAPI endpoint URL..."
            title="Enter a RapidAPI endpoint URL"
            aria-describedby="url-help"
          />
          <button id="detectBtn" class="btn btn-secondary" title="Auto-detect API details">
            Detect
          </button>
        </div>
        <small id="url-help" style="color: rgba(245, 245, 245, 0.7); font-size: 0.875rem;">
          üí° Paste URL from RapidAPI documentation page
        </small>
      </div>

      <!-- API Details -->
      <div class="form-group">
        <label class="label">‚öôÔ∏è API Configuration</label>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
          <div>
            <label style="font-size: 0.875rem; color: rgba(245, 245, 245, 0.8);">HTTP Method</label>
            <select id="httpMethod" class="input">
              <option value="GET">GET</option>
              <option value="POST">POST</option>
              <option value="PUT">PUT</option>
              <option value="DELETE">DELETE</option>
              <option value="PATCH">PATCH</option>
            </select>
          </div>
          <div>
            <label style="font-size: 0.875rem; color: rgba(245, 245, 245, 0.8);">Code Style</label>
            <select id="codeStyle" class="input">
              <option value="axios">Axios (Recommended)</option>
              <option value="fetch">Fetch API</option>
              <option value="rapidapi">RapidAPI SDK</option>
            </select>
          </div>
        </div>
      </div>

      <!-- Parameters Section -->
      <div id="parametersSection" class="form-group" style="display: none;">
        <label class="label">üìã API Parameters</label>
        <div id="parametersList"></div>
        <button type="button" id="addParameterBtn" class="btn btn-secondary" style="margin-top: 0.5rem;">
          ‚ûï Add Parameter
        </button>
      </div>

      <!-- Generate Button -->
      <div class="form-group" style="text-align: center;">
        <button id="generateBtn" class="btn btn-primary" title="Generate RapidAPI client code (Ctrl+Enter)" style="padding: 1rem 3rem; font-size: 1.1rem;">
          üöÄ Generate RapidAPI Code
        </button>
      </div>
    </div>

    <!-- Output Section -->
    <div id="outputSection" class="glass output-section">
      <div class="output-header">
        <h2 class="output-title">Generated Code</h2>
        <div class="button-group">
          <button id="copyBtn" class="btn btn-secondary">üìã Copy</button>
          <button id="downloadBtn" class="btn btn-primary">üì¶ Download</button>
        </div>
      </div>

      <!-- Tabs -->
      <div class="tabs">
        <button class="tab active" data-tab="axios">‚ö° Axios</button>
        <button class="tab" data-tab="fetch">üåê Fetch</button>
        <button class="tab" data-tab="rapidapi">üöÄ RapidAPI SDK</button>
        <button class="tab" data-tab="env">üîê Environment</button>
        <button class="tab" data-tab="curl">üíª cURL</button>
      </div>

      <!-- Code Display -->
      <div class="code-display">
        <pre id="codeContent"></pre>
      </div>
    </div>
  </div>

  <script>
    // Application state
    let state = {
      activeTab: 'axios',
      apiUrl: 'https://weatherapi-com.p.rapidapi.com/current.json',
      apiKey: '',
      httpMethod: 'GET',
      codeStyle: 'axios',
      parameters: [],
      host: '',
      isGenerating: false,
      generated: false
    };

    // Popular RapidAPI endpoints for suggestions
    const POPULAR_APIS = {
      'weatherapi-com.p.rapidapi.com': {
        name: 'WeatherAPI',
        endpoints: {
          current: '/current.json?q={location}',
          forecast: '/forecast.json?q={location}&days={days}',
          search: '/search.json?q={query}'
        },
        defaultParams: { q: 'London' }
      },
      'famous-quotes4.p.rapidapi.com': {
        name: 'Famous Quotes',
        endpoints: {
          random: '/',
          byCategory: '/?category={category}',
          byAuthor: '/?author={author}'
        }
      },
      'newsapi.org': {
        name: 'NewsAPI',
        endpoints: {
          headlines: '/v2/top-headlines?country={country}',
          everything: '/v2/everything?q={query}'
        },
        defaultParams: { country: 'us' }
      }
    };

    // Load saved API key from localStorage
    function loadSavedKey() {
      const savedKey = localStorage.getItem('rapidapi_key');
      if (savedKey) {
        document.getElementById('rapidApiKey').value = savedKey;
        state.apiKey = savedKey;
      }
    }

    // Save API key to localStorage
    function saveApiKey() {
      const keyInput = document.getElementById('rapidApiKey');
      const key = keyInput.value.trim();
      
      if (!key) {
        alert('Please enter an API key');
        return;
      }

      if (key.length < 20) {
        alert('API key seems too short. Please verify your RapidAPI key.');
        return;
      }

      state.apiKey = key;
      localStorage.setItem('rapidapi_key', key);
      
      const saveBtn = document.getElementById('saveKeyBtn');
      const originalText = saveBtn.textContent;
      saveBtn.textContent = '‚úÖ Saved!';
      setTimeout(() => {
        saveBtn.textContent = originalText;
      }, 2000);
    }

    // Extract host from URL
    function extractHost(url) {
      try {
        const urlObj = new URL(url);
        return urlObj.hostname;
      } catch (error) {
        return '';
      }
    }

    // Detect API details from URL
    function detectApiDetails() {
      const apiUrl = document.getElementById('apiUrl').value.trim();
      if (!apiUrl) return;

      const host = extractHost(apiUrl);
      state.host = host;
      
      // Check if it's a known API
      const apiInfo = POPULAR_APIS[host];
      if (apiInfo) {
        // Auto-fill some parameters based on known APIs
        if (apiInfo.defaultParams) {
          state.parameters = Object.entries(apiInfo.defaultParams).map(([key, value]) => ({
            name: key,
            value: value
          }));
          updateParametersUI();
        }
        
        alert(`‚úÖ Detected: ${apiInfo.name}\nHost: ${host}`);
      } else {
        alert(`üì° Custom API detected\nHost: ${host}`);
      }
      
      document.getElementById('parametersSection').style.display = 'block';
    }

    // Add parameter to the list
    function addParameter(name = '', value = '') {
      const parametersList = document.getElementById('parametersList');
      const paramIndex = state.parameters.length;
      
      const paramRow = document.createElement('div');
      paramRow.className = 'parameter-row';
      paramRow.innerHTML = `
        <input type="text" class="parameter-input" placeholder="Parameter name" value="${name}" data-index="${paramIndex}" data-field="name">
        <input type="text" class="parameter-input" placeholder="Parameter value" value="${value}" data-index="${paramIndex}" data-field="value">
        <button type="button" class="remove-param-btn" onclick="removeParameter(${paramIndex})">‚ùå</button>
      `;
      
      parametersList.appendChild(paramRow);
      state.parameters.push({ name, value });
      
      // Add event listeners for parameter inputs
      const inputs = paramRow.querySelectorAll('.parameter-input');
      inputs.forEach(input => {
        input.addEventListener('input', updateParameterValue);
      });
    }

    // Remove parameter
    function removeParameter(index) {
      state.parameters.splice(index, 1);
      updateParametersUI();
    }

    // Update parameter value
    function updateParameterValue(event) {
      const index = parseInt(event.target.dataset.index);
      const field = event.target.dataset.field;
      const value = event.target.value;
      
      if (state.parameters[index]) {
        state.parameters[index][field] = value;
      }
    }

    // Update parameters UI
    function updateParametersUI() {
      const parametersList = document.getElementById('parametersList');
      parametersList.innerHTML = '';
      
      state.parameters.forEach((param, index) => {
        const paramRow = document.createElement('div');
        paramRow.className = 'parameter-row';
        paramRow.innerHTML = `
          <input type="text" class="parameter-input" placeholder="Parameter name" value="${param.name}" data-index="${index}" data-field="name">
          <input type="text" class="parameter-input" placeholder="Parameter value" value="${param.value}" data-index="${index}" data-field="value">
          <button type="button" class="remove-param-btn" onclick="removeParameter(${index})">‚ùå</button>
        `;
        
        parametersList.appendChild(paramRow);
        
        // Add event listeners
        const inputs = paramRow.querySelectorAll('.parameter-input');
        inputs.forEach(input => {
          input.addEventListener('input', updateParameterValue);
        });
      });
    }

    // Generate RapidAPI code based on current settings
    function generateRapidAPICode() {
      const url = state.apiUrl;
      const method = state.httpMethod;
      const host = state.host || extractHost(url);
      const apiKey = state.apiKey || 'YOUR_RAPIDAPI_KEY_HERE';
      
      // Build parameters object
      const params = {};
      state.parameters.forEach(param => {
        if (param.name && param.value) {
          params[param.name] = param.value;
        }
      });

      const codes = {
        axios: generateAxiosCode(url, method, host, apiKey, params),
        fetch: generateFetchCode(url, method, host, apiKey, params),
        rapidapi: generateRapidAPISDKCode(url, method, host, apiKey, params),
        env: generateEnvCode(),
        curl: generateCurlCode(url, method, host, apiKey, params)
      };

      return codes;
    }

    // Generate Axios code (matches RapidAPI examples)
    function generateAxiosCode(url, method, host, apiKey, params) {
      const hasParams = Object.keys(params).length > 0;
      const paramsCode = hasParams ? `,\n  params: ${JSON.stringify(params, null, 4)}` : '';
      
      return `import axios from 'axios';

const options = {
  method: '${method}',
  url: '${url}'${paramsCode},
  headers: {
    'X-RapidAPI-Key': '${apiKey}',
    'X-RapidAPI-Host': '${host}'
  }
};

async function makeRequest() {
  try {
    const response = await axios.request(options);
    console.log(response.data);
    return response.data;
  } catch (error) {
    console.error('Error:', error.response?.data || error.message);
    throw error;
  }
}

// Call the function
makeRequest();`;
    }

    // Generate Fetch code (matches RapidAPI examples)
    function generateFetchCode(url, method, host, apiKey, params) {
      const hasParams = Object.keys(params).length > 0;
      let fetchUrl = url;
      
      if (hasParams && method === 'GET') {
        const urlParams = new URLSearchParams(params);
        fetchUrl = url.includes('?') ? `${url}&${urlParams}` : `${url}?${urlParams}`;
      }

      const bodyCode = hasParams && method !== 'GET' ? `,\n  body: JSON.stringify(${JSON.stringify(params, null, 4)})` : '';
      const contentTypeHeader = method !== 'GET' ? `,\n    'Content-Type': 'application/json'` : '';

      return `async function makeRequest() {
  const url = '${fetchUrl}';
  
  const options = {
    method: '${method}',
    headers: {
      'X-RapidAPI-Key': '${apiKey}',
      'X-RapidAPI-Host': '${host}'${contentTypeHeader}
    }${bodyCode}
  };

  try {
    const response = await fetch(url, options);
    
    if (!response.ok) {
      throw new Error(\`HTTP error! status: \${response.status}\`);
    }
    
    const data = await response.json();
    console.log(data);
    return data;
  } catch (error) {
    console.error('Error:', error.message);
    throw error;
  }
}

// Call the function
makeRequest();`;
    }

    // Generate RapidAPI SDK code
    function generateRapidAPISDKCode(url, method, host, apiKey, params) {
      const hasParams = Object.keys(params).length > 0;
      const paramsCode = hasParams ? `\nconst params = ${JSON.stringify(params, null, 2)};\n` : '';

      return `// Install: npm install @rapidapi/rapidapi-sdk
import { RapidAPI } from '@rapidapi/rapidapi-sdk';

const rapidapi = new RapidAPI({
  key: '${apiKey}',
  host: '${host}'
});

async function makeRequest() {
  ${paramsCode}try {
    const response = await rapidapi.request({
      method: '${method}',
      url: '${url}'${hasParams ? ',\n      params: params' : ''}
    });
    
    console.log(response.data);
    return response.data;
  } catch (error) {
    console.error('Error:', error.message);
    throw error;
  }
}

// Call the function
makeRequest();`;
    }

    // Generate environment file
    function generateEnvCode() {
      return `# RapidAPI Configuration
# Copy this to your .env file and replace with your actual API key
# Get your API key from: https://rapidapi.com/

RAPIDAPI_KEY=${state.apiKey || 'your_rapidapi_key_here'}

# Additional configuration
NODE_ENV=development
API_TIMEOUT=10000

# Usage in your code:
# const apiKey = process.env.RAPIDAPI_KEY;`;
    }

    // Generate cURL code
    function generateCurlCode(url, method, host, apiKey, params) {
      const hasParams = Object.keys(params).length > 0;
      let curlUrl = url;
      let dataFlag = '';

      if (hasParams) {
        if (method === 'GET') {
          const urlParams = new URLSearchParams(params);
          curlUrl = url.includes('?') ? `${url}&${urlParams}` : `${url}?${urlParams}`;
        } else {
          dataFlag = ` \\\\\n  --data '${JSON.stringify(params)}'`;
        }
      }

      return `curl --request ${method} \\\\\n  --url '${curlUrl}' \\\\\n  --header 'X-RapidAPI-Host: ${host}' \\\\\n  --header 'X-RapidAPI-Key: ${apiKey}'${method !== 'GET' ? ` \\\\\n  --header 'Content-Type: application/json'` : ''}${dataFlag}`;
    }

    // Update code display
    function updateCodeDisplay() {
      const codes = generateRapidAPICode();
      document.getElementById('codeContent').textContent = codes[state.activeTab] || '';
    }

    // Handle generate button click
    function handleGenerate() {
      // Validate inputs
      if (!state.apiUrl) {
        alert('Please enter an API URL');
        return;
      }

      try {
        new URL(state.apiUrl);
      } catch (error) {
        alert('Please enter a valid URL');
        return;
      }

      if (!state.apiKey) {
        if (!confirm('No API key saved. Continue without API key? (You can add it later)')) {
          return;
        }
      }

      const generateBtn = document.getElementById('generateBtn');
      const outputSection = document.getElementById('outputSection');
      
      state.isGenerating = true;
      generateBtn.textContent = 'üîÑ Generating...';
      generateBtn.disabled = true;

      setTimeout(() => {
        state.generated = true;
        state.isGenerating = false;
        generateBtn.textContent = 'üöÄ Generate RapidAPI Code';
        generateBtn.disabled = false;
        
        outputSection.classList.add('show');
        updateCodeDisplay();
        
        // Scroll to output
        outputSection.scrollIntoView({ behavior: 'smooth' });
      }, 1000);
    }

    // Handle tab switching
    function handleTabSwitch(tabName) {
      document.querySelectorAll('.tab').forEach(tab => {
        tab.classList.remove('active');
      });
      document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');
      
      state.activeTab = tabName;
      updateCodeDisplay();
    }

    // Handle copy functionality
    async function handleCopy() {
      const copyBtn = document.getElementById('copyBtn');
      const codes = generateRapidAPICode();
      const codeText = codes[state.activeTab];
      
      try {
        await navigator.clipboard.writeText(codeText);
        const originalText = copyBtn.textContent;
        copyBtn.textContent = '‚úÖ Copied!';
        setTimeout(() => {
          copyBtn.textContent = originalText;
        }, 2000);
      } catch (err) {
        // Fallback for browsers that don't support clipboard API
        const textArea = document.createElement('textarea');
        textArea.value = codeText;
        document.body.appendChild(textArea);
        textArea.select();
        document.execCommand('copy');
        document.body.removeChild(textArea);
        alert('Code copied to clipboard!');
      }
    }

    // Handle download functionality
    function handleDownload() {
      const codes = generateRapidAPICode();
      const filename = `rapidapi-client-${Date.now()}.js`;
      
      const content = `// Generated by RapidAPI Generator
// Generated on: ${new Date().toISOString()}
// API URL: ${state.apiUrl}

${codes[state.activeTab]}`;
      
      const blob = new Blob([content], { type: 'text/javascript' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = filename;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
    }

    // Initialize event listeners
    document.addEventListener('DOMContentLoaded', function() {
      // Load saved API key
      loadSavedKey();

      // Save API key button
      document.getElementById('saveKeyBtn').addEventListener('click', saveApiKey);
      
      // Detect API button
      document.getElementById('detectBtn').addEventListener('click', detectApiDetails);
      
      // Generate button
      document.getElementById('generateBtn').addEventListener('click', handleGenerate);
      
      // Copy button
      document.getElementById('copyBtn').addEventListener('click', handleCopy);
      
      // Download button
      document.getElementById('downloadBtn').addEventListener('click', handleDownload);
      
      // Tab buttons
      document.querySelectorAll('.tab').forEach(tab => {
        tab.addEventListener('click', (e) => {
          handleTabSwitch(e.target.dataset.tab);
        });
      });

      // Add parameter button
      document.getElementById('addParameterBtn').addEventListener('click', () => {
        addParameter();
      });
      
      // Form inputs
      document.getElementById('apiUrl').addEventListener('input', (e) => {
        state.apiUrl = e.target.value;
        state.host = extractHost(e.target.value);
      });

      document.getElementById('httpMethod').addEventListener('change', (e) => {
        state.httpMethod = e.target.value;
      });

      document.getElementById('codeStyle').addEventListener('change', (e) => {
        state.codeStyle = e.target.value;
      });

      document.getElementById('rapidApiKey').addEventListener('input', (e) => {
        state.apiKey = e.target.value;
      });

      // Keyboard shortcuts
      document.addEventListener('keydown', (e) => {
        if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {
          e.preventDefault();
          handleGenerate();
        }
      });

      // Initialize host from default URL
      state.host = extractHost(state.apiUrl);
      
      // Initialize with default content
      if (state.apiKey) {
        updateCodeDisplay();
      }

      // Register service worker for PWA functionality
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('service-worker.js')
            .then(registration => {
              console.log('SW registered: ', registration);
              
              // Show install prompt after service worker is ready
              showInstallPrompt();
            })
            .catch(registrationError => {
              console.log('SW registration failed: ', registrationError);
            });
        });
      }
    });

    // PWA Install Prompt
    let deferredPrompt;

    window.addEventListener('beforeinstallprompt', (e) => {
      console.log('beforeinstallprompt fired');
      e.preventDefault();
      deferredPrompt = e;
      showInstallPrompt();
    });

    function showInstallPrompt() {
      // Create install button if it doesn't exist
      let installBtn = document.getElementById('installBtn');
      if (!installBtn && deferredPrompt) {
        installBtn = document.createElement('button');
        installBtn.id = 'installBtn';
        installBtn.className = 'btn btn-secondary';
        installBtn.style.cssText = 'position: fixed; top: 20px; right: 20px; z-index: 1000;';
        installBtn.innerHTML = 'üì± Install App';
        installBtn.addEventListener('click', installApp);
        document.body.appendChild(installBtn);
      }
    }

    async function installApp() {
      if (!deferredPrompt) return;

      deferredPrompt.prompt();
      const choiceResult = await deferredPrompt.userChoice;
      
      if (choiceResult.outcome === 'accepted') {
        console.log('User accepted the install prompt');
        document.getElementById('installBtn')?.remove();
      } else {
        console.log('User dismissed the install prompt');
      }
      
      deferredPrompt = null;
    }

    // Handle app installation
    window.addEventListener('appinstalled', (evt) => {
      console.log('App was successfully installed');
      document.getElementById('installBtn')?.remove();
    });

    // Make removeParameter function global for onclick handlers
    window.removeParameter = removeParameter;
  </script>
</body>
</html>
